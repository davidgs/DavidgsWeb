name: Hugo pages

on:
  push:
    branches:
      - main  # Set a branch to deploy

jobs:
  deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: '0.81.0'
          # extended: true
      - name: Golang
        uses: actions/checkout@master
      - name: setup go
        uses: actions/setup-go@v1
        with: 
          go-version: '1.16.3'
      - name: Checkout Translate 
        uses: actions/checkout@v2
        with:
          repository: 'davidgs/Translator' 
          clean: false
      - name: Build Translator
        run: go build translate.go
      - name: Secrets
        run: echo '${{ secrets.TRANSLATE_SECRET }} > ./google-secret.json'
      - name: Where Are We
        run: pwd; ls -l
 #     - name: Translate
 #       run: ./Translate/translate /content/posts/
 #     - name: Build
#        run: hugo --minify
 #     - name: rsync deployments
#        uses: burnett01/rsync-deployments@4.1
 #       with:
 #         switches: -avzr
 #         path: public/
 #         remote_path: /home/${{ secrets.SSH_USER }}/www
 #         remote_host: ${{ secrets.SSH_HOST }}
 #         remote_port: ${{ secrets.SSH_PORT }}
 #         remote_user: ${{ secrets.SSH_USER }}
 #         remote_key: ${{ secrets.WEBSITE_DEPLOY_KEY }}
